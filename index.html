<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="theme-color" content="#222222">
    <!-- Standardized PWA support -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-title" content="Vault">

    <!-- (Keep these for iOS legacy support) -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Vault">

    <title>Unreleased[VAULT]</title>
    <link rel="stylesheet" href="app.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
        rel="stylesheet">

    <link rel="manifest" href="manifest.json?v=2">

    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon-180.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icons/apple-touch-icon-152.png">
    <link rel="apple-touch-icon" sizes="120x120" href="icons/apple-touch-icon-120.png">

</head>

<body>
    <!-- DASHBOARD -->
    <section id="dashboard">
        <h1 style="font-family: TuskerMedium; font-size:36px;">Weekly Goal üéØ</h1>
        <div id="counter">0 / 20</div>

        <div class="progress-bar">
            <div id="progress"></div>
        </div>
        <div id="summary"></div>
    </section>

    <!-- RECENT LIST -->
    <section id="recent">
        <h2>Recent Music:</h2>
        <ul id="beat-list"></ul>
    </section>

    <!-- BOTTOM NAVBAR -->
    <nav id="bottom-nav">
        <button id="home-btn"><i class="fa-solid fa-house"></i></button>

        <button id="library-btn"><i class="fa-solid fa-vault"></i></button>
        <button id="add-btn">Ôºã</button>
    </nav>


    <!-- MODAL ADD BEAT -->
    <div id="modal" class="hidden">
        <div id="modal-content">
            <button id="close-modal">‚úï</button>
            <h3>Aggiungi Beat</h3>
            <form id="beat-form">
                <input type="text" id="beat-name" placeholder="Titolo beat" required />
                <input type="number" id="beat-bpm" placeholder="BPM" required />
                <!-- aggiungi subito dopo il campo BPM -->
                <label for="beat-rating">Rating</label>
                <input type="number" id="beat-rating" name="beat-rating" min="1" max="5" value="3" required />

                <label for="beat-tag">Tipo</label>
                <select id="beat-tag" name="beat-tag" required>
                    <option value="Beat">Beat</option>
                    <option value="Sample">Sample</option>
                </select>

                <textarea id="beat-notes" placeholder="Note (opzionale)"></textarea>
                <input type="file" id="beat-file" accept=".mp3,audio/mpeg" />
                <button type="submit">ADD</button>
            </form>
        </div>
    </div>

    <!-- GLOBAL AUDIO BAR (in fondo al body) -->
    <footer id="audio-bar" class="">
        <div id="now-playing">‚Äî</div>


        <!-- <span id="timer">0:00</span> -->
        <button id="play-pause">‚ñ∂</button>
        <audio id="audio"></audio>
    </footer>
    <input id="seek" type="range" value="0" min="0" max="100">

    <!-- Supabase + app.js ... (tuo codice gi√† esistente) -->


    <!-- 1) Carica il bundle UMD di Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/umd/supabase.min.js"></script>
    <!-- 2) Inizializza il client senza shadowing -->
    <script>
        window.SUPABASE_URL = 'https://cbdfohvkllpidwigjykd.supabase.co';
        window.SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNiZGZvaHZrbGxwaWR3aWdqeWtkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE1NDc0NTYsImV4cCI6MjA2NzEyMzQ1Nn0.vpnWdLjAlnuiTK65pH-G_2OsTdkI1GFiVuDBnttc-7k';
        // ‚ùå rimuovi qualsiasi "const supabase =" qui
        // ‚úî invece sovrascrivi il global `supabase` con l'istanza client
        window.supabase = window.supabase.createClient(window.SUPABASE_URL, window.SUPABASE_ANON_KEY);
        console.log('‚úÖ Supabase inizializzato:', window.supabase);
    </script>
    <!-- 3) Carica poi il tuo JS -->
    <script src="app.js"></script>

</body>

</html>